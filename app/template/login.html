<div class="alert alert-danger" ng-if="error.text" ng-bind="error.text"></div>
<div class="jumbotron">
  <h2 ng-if="!loggedIn('twitter') && !loggedIn('facebook')">
    Hello, Please Login to Facebook or Twitter
  </h2>
  <h2 ng-if="!loggedIn('twitter') && loggedIn('facebook')">
    Hello, Please Login to Twitter
  </h2>
  <h2 ng-if="!loggedIn('facebook') && loggedIn('twitter')">
    Hello, Please Login to Facebook
  </h2>
  <h2 ng-if="loggedIn('twitter') && loggedIn('facebook')">
    Hello, {{ fb.first_name }}. Here are your data.
  </h2>

  <a ng-href="/auth/facebook" ng-if="!loggedIn('facebook')" class="btn btn-sm btn-primary">Login to Facebook</a>
  <a ng-href="/auth/twitter" ng-if="!loggedIn('twitter')" class="btn btn-sm btn-primary">Login to Twitter</a>
</div>

<div ng-if="loggedIn('twitter') || loggedIn('facebook')">
  <div class="main">
    <tabset>
      <tab heading="Profile" ng-if="loggedIn('facebook')">
        <div ng-show="!statsLoaded" class="loader">Loading Stats...</div>
        <dl ng-show="statsLoaded" class="dl-horizontal">
          <dt>Name</dt>
          <dd>{{ fb.name }}</dd>
          <dt>Birthday</dt>
          <dd>{{ fb.birthday }}</dd>
          <dt>Gender</dt>
          <dd>{{ fb.gender }}</dd>
          <dt>Education</dt>
          <dd ng-repeat="e in fb.education">{{ e.school.name }} {{ e.year.name }}</dd>
          <dt>Languages</dt>
          <dd ng-repeat="l in fb.languages">{{ l.name }}</dd>
          <dt>Location</dt>
          <dd>{{ fb.location.name }}</dd>
          <dt>Sports</dt>
          <dd ng-repeat="s in fb.sports">{{ s.name }}</dd>
          <dt>Username</dt>
          <dd>{{ fb.username }}</dd>
        </dl>
      </tab>

      <tab heading="Friends" ng-if="loggedIn('facebook')">
        <div ng-show="!statsLoaded" class="loader">Loading Stats...</div>
        <div ng-show="statsLoaded">
          <div class="row">
            <strong class="col-sm-3">Number of Friends</strong>
            <p class="col-sm-9" ng-bind="numFriends"></p>
          </div>
          <div class="row">
            <strong class="col-sm-3">Number of Friends with same birthday month</strong>
            <p class="col-sm-9" ng-bind="sameBDay"></p>
          </div>
          <div class="row">
            <strong class="col-sm-3">Number of Friends with same gender</strong>
            <p class="col-sm-9" ng-bind="sameGender"></p>
          </div>
          <div class="row">
            <strong class="col-sm-3">Number of Friends who went to a same school</strong>
            <p class="col-sm-9" ng-bind="sameSchool"></p>
          </div>
          <div class="row">
            <strong class="col-sm-3">Number of Friends who are in the same location</strong>
            <p class="col-sm-9" ng-bind="sameLocation"></p>
          </div>
        </div>
      </tab>

      <tab heading="Statuses" ng-if="loggedIn('facebook')">
        <div ng-show="!statsLoaded" class="loader">Loading Stats...</div>
        <div ng-show="statsLoaded">
          <div class="row">
            <strong class="col-sm-3">Average Status Length in characters</strong>
            <p class="col-sm-9" ng-bind="avgLen | number:2"></p>
          </div>
          <div class="row">
            <strong class="col-sm-3">Average Status Length in words</strong>
            <p class="col-sm-9" ng-bind="avgWordLen | number:2"></p>
          </div>
          <div class="row">
            <strong class="col-sm-3">Average time in hours between each status update</strong>
            <p class="col-sm-9" ng-bind="avgDelay | number:2"></p>
          </div>
          <div class="row">
            <strong class="col-sm-3">Average number of status updates per day</strong>
            <p class="col-sm-9" ng-bind="avgPerDay | number:2"></p>
          </div>
        </div>
      </tab>

      <tab heading="Twitter" ng-if="loggedIn('twitter')">
        <div ng-show="!twitterLoaded" class="loader">Loading Tweets...</div>
        <div ng-show="twitterLoaded">
          <div class="panel panel-default">
            <div class="panel-heading">Here are your 20 latest tweets</div>
            <ul class="list-group">
              <li class="list-group-item" ng-repeat="t in userTweets" ng-bind="t.text"></li>
            </ul>
          </div>

          <div class="panel panel-default">
            <div class="panel-heading">Here are your 20 latest tweets on your timeline</div>
            <ul class="list-group">
              <li class="list-group-item" ng-repeat="t in homeTweets" ng-bind="t.text"></li>
            </ul>
          </div>

          <div class="panel panel-default">
            <div class="panel-heading">Here are your 20 latest mentions</div>
            <ul class="list-group">
              <li class="list-group-item" ng-repeat="t in mentions" ng-bind="t.text"></li>
            </ul>
          </div>
        </div>

      </tab>

      <tab heading="Graph">
        <div ng-show="!graphLoaded" class="loader">Loading Graph...</div>
        <svg id="graph"></svg>
      </tab>
    </tabset>

  </div>
</div>
